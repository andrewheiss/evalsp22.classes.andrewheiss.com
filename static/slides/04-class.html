<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Class 4: Measuring stuff and DAGs</title>
    <meta charset="utf-8" />
    <meta name="author" content="Andrew Heiss" />
    <meta name="date" content="2022-02-09" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/tile-view-0.2.6/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view-0.2.6/tile-view.js"></script>
    <link rel="stylesheet" href="css/ath-slides.css" type="text/css" />
    <link rel="stylesheet" href="css/ath-inferno-fonts.css" type="text/css" />
    <link rel="stylesheet" href="css/animate.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">








class: center middle main-title section-title-3

# In-person&lt;br&gt;session 4

.class-info[

**February 3, 2022**

.light[PMAP 8521: Program evaluation&lt;br&gt;
Andrew Young School of Policy Studies
]

]

---

name: outline
class: title title-inv-8

# Plan for today

--

.box-4.medium.sp-after-half[Quick useful R tips]

--

.box-2.medium.sp-after-half[Measuring outcomes]

--

.box-5.medium.sp-after-half[DAGs]

---

layout: false
name: r-stuff
class: center middle section-title section-title-4 animated fadeIn

# Quick useful&lt;br&gt;R tips

---

layout: true
class: middle

---

.box-4.large[Visual markdown editor]

---

.box-4.large[Weird figure/table&lt;br&gt;placement in PDFs]

???

https://bookdown.org/yihui/rmarkdown-cookbook/figure-placement.html

---

.box-4.large[Word count]

???

&lt;https://github.com/benmarwick/wordcountaddin&gt;

---

.box-4.large[Figure and table&lt;br&gt;captions and numbers]

???

- &lt;https://bookdown.org/yihui/rmarkdown-cookbook/figure-number.html&gt;
- &lt;https://rmd4sci.njtierney.com/figures-tables-captions-.html&gt;
- &lt;https://rmd4sci.njtierney.com/start.html&gt;

---

.box-4.large[DAGs in R vs. Dagitty]

???

&lt;https://evalsp22.classes.andrewheiss.com/example/dags/&gt;

---

layout: false
name: outcomes
class: center middle section-title section-title-2 animated fadeIn

# Measuring&lt;br&gt;outcomes

---

layout: true
class: title title-2

---

# Outcomes and programs

.box-2.medium[Outcome variable]

.box-inv-2.sp-after-half.SMALL[Thing you're measuring]

--

.box-2.medium[Outcome change]

.box-inv-2.sp-after-half.SMALL[∆ in thing you're measuring over time]

--

.box-2.medium[Program effect]

.box-inv-2.SMALL[∆ in thing you're measuring over time *because of* the program]

---

# Outcomes and programs

&lt;figure&gt;
  &lt;img src="img/04/program-effect.png" alt="Outcomes and program effect" title="Outcomes and program effect" width="100%"&gt;
&lt;/figure&gt;

---

layout: false
class: middle

.box-2.large[Abstraction]

---

layout: false
name: dags
class: center middle section-title section-title-5 animated fadeIn

# DAGs

---

layout: true
class: middle

---

.box-5.medium[You keep saying that causal inference&lt;br&gt;lets you "legally" make causal claims.]

.box-5.medium[Are there actual legal consequences&lt;br&gt;if you make a causal claim without&lt;br&gt;specific language?]

---

.box-5.large[Causal thinking is necessary—&lt;br&gt;even for descriptive work!]

---

.center[

&lt;figure&gt;
  &lt;img src="img/04-class/supercentenarians.png" alt="Supercentenarians" title="Supercentenarians" width="46%"&gt;
&lt;/figure&gt;

]

???

Necessity of causal thinking: Mention the McElreath tweet on birth certificate introduction and death ages: &lt;https://twitter.com/rlmcelreath/status/1427564280744976384&gt;

&lt;https://www.biorxiv.org/content/10.1101/704080v2&gt;

---

layout: false

.box-5.less-medium["Every time I get a haircut, I become more mature!"]

&lt;figure&gt;
  &lt;img src="img/04-class/ben-hair.jpg" alt="Benjamin haircut" title="Benjamin haircut" width="100%"&gt;
&lt;/figure&gt;

---

.box-5.less-medium["Every time I get a haircut, I become more mature!"]

&lt;img src="04-class_files/figure-html/unnamed-chunk-1-1.png" width="70%" style="display: block; margin: auto;" /&gt;

.center[$$E[\text{Maturity} \mid \operatorname{do} (\text{Get haircut})]$$]

---

.box-5.less-medium[Getting older opens a backdoor path]

&lt;img src="04-class_files/figure-html/unnamed-chunk-2-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

class: middle

.box-5.medium[But what does that mean,&lt;br&gt;"opening a backdoor path"?]

.box-5.medium[How does statistical association&lt;br&gt;get passed through paths?]

---

.box-5.less-medium.sp-after[How do I know which of these is which?]

.center[
&lt;figure&gt;
  &lt;img src="img/05-class/dag-associations.png" alt="DAG associations" title="DAG associations" width="100%"&gt;
&lt;/figure&gt;
]

---

class: middle

.pull-left[
&lt;figure&gt;
  &lt;img src="img/04-class/slider-switch-plain-80.jpg" alt="Switch and slider" title="Switch and slider" width="100%"&gt;
&lt;/figure&gt;
]

.pull-right[
&lt;img src="04-class_files/figure-html/confounding-dag-alone-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

class: middle

.pull-left[
&lt;figure&gt;
  &lt;img src="img/04-class/slider-switch-plain-80.jpg" alt="Switch and slider" title="Switch and slider" width="100%"&gt;
&lt;/figure&gt;
]

.pull-right[
&lt;img src="04-class_files/figure-html/mediating-dag-alone-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

class: middle

.pull-left[
&lt;figure&gt;
  &lt;img src="img/04-class/slider-switch-plain-80.jpg" alt="Switch and slider" title="Switch and slider" width="100%"&gt;
&lt;/figure&gt;
]

.pull-right[
&lt;img src="04-class_files/figure-html/colliding-dag-alone-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

layout: true
class: middle

---

.box-5.medium[d-separation]

.box-inv-5[Except for the one arrow between X and Y,&lt;br&gt;no statistical association can flow between X and Y]

.box-inv-5[This is **identification**—&lt;br&gt;all alternative stories are ruled out&lt;br&gt;and the relationship is isolated]

---

.box-5.large[How exactly do colliders&lt;br&gt;mess up your results?]

.box-5.medium[It looks like you can&lt;br&gt;still get the effect of X on Y]

---

&lt;img src="04-class_files/figure-html/nba-dag-1.png" width="65%" style="display: block; margin: auto;" /&gt;

---

.center[
&lt;figure&gt;
  &lt;img src="img/04-class/facebook.png" alt="Facebook collider" title="Facebook collider" width="55%"&gt;
&lt;/figure&gt;
]

???

&lt;https://www.businessinsider.com/facebook-sent-incomplete-misinformation-data-flawed-researchers-2021-9&gt;

&lt;https://www.nytimes.com/live/2020/2020-election-misinformation-distortions#facebook-sent-flawed-data-to-misinformation-researchers&gt;

---

layout: false
class: title title-5

# Does niceness improve appearance?



.pull-left[

&lt;img src="04-class_files/figure-html/unnamed-chunk-3-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

--

.pull-right[

&lt;img src="04-class_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

class: title title-5

# Collider distorts the true effect!

.pull-left[

&lt;img src="04-class_files/figure-html/unnamed-chunk-5-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

--

.pull-right[

&lt;img src="04-class_files/figure-html/unnamed-chunk-6-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

.box-5.large[Effect of race on police use of force&lt;br&gt;using administrative data]

---

.box-5.medium[Effect of race on police use of force&lt;br&gt;using administrative data]

.pull-left[
&lt;figure&gt;
  &lt;img src="img/05-class/klm-dag.png" alt="Use of force" title="Use of force" width="100%"&gt;
&lt;/figure&gt;
]

.pull-right[
&lt;figure&gt;
  &lt;img src="img/05-class/klm.png" alt="Use of force" title="Use of force" width="100%"&gt;
&lt;/figure&gt;
]

---

layout: true
class: middle

---

.box-5.large[Smoking → Cardiac arrest example]

???

| Person | Smoker | Cardiac arrest | Cholesterol | Weight | Lifestyle healthiness |
|--------|--------|----------------|-------------|--------|-----------------------|
| 1      | TRUE   | TRUE           | 150         | 170    | 6                     |
| 2      | TRUE   | FALSE          | 170         | 180    | 3                     |
| 3      | FALSE  | FALSE          | 130         | 110    | 9                     |
| 4      | FALSE  | TRUE           | 140         | 140    | 8                     |
| 5      | TRUE   | TRUE           | 120         | 150    | 2                     |
| 6      | TRUE   | FALSE          | 130         | 230    | 3                     |
| 7      | FALSE  | FALSE          | 140         | 250    | 10                    |

```text
dag {
bb="0,0,1,1"
"Cardiac arrest" [outcome,pos="0.599,0.432"]
Cholesterol [pos="0.415,0.440"]
Lifestyle [pos="0.156,0.317"]
Smoking [exposure,pos="0.243,0.428"]
Weight [adjusted,pos="0.297,0.255"]
Cholesterol -&gt; "Cardiac arrest"
Lifestyle -&gt; Smoking
Lifestyle -&gt; Weight
Smoking -&gt; Cholesterol
Weight -&gt; Cholesterol
}
```

---

.box-5.medium[How can you be sure&lt;br&gt;you include everything in a DAG?]

.box-5.medium[Is there a rule of thumb&lt;br&gt;for the number of nodes?]

---

.box-5.medium[Why do DAGs have to be acyclic?]

.box-5.medium[What if there really is reverse causation?]

---

.box-5.large[How do we actually&lt;br&gt;adjust for these things?]

---

.box-5.large[What's the difference between&lt;br&gt;logic models and DAGs?]

.box-inv-5[Can't I just remake my logic model in Dagitty and be done?]

---

layout: false
class: title title-5

# DAGs vs. Logic models

.box-5.large[DAGs are a *statistical* tool]

.box-inv-5[Describe a data-generating process&lt;br&gt;and isolate/identify relationships]

--

.box-5.large.sp-before[Logic models are a *managerial* tool]

.box-inv-5[Oversee the inner workings of a program and its theory]

---

class: bg-full
background-image: url("img/01/nyt-dag2.png")

???

https://twitter.com/andrewheiss/status/1208836534285340673

---

class: middle

.pull-left[
&lt;figure&gt;
  &lt;img src="img/04-class/greenspace-eater.png" alt="Green space in Berkeley" title="Green space in Berkeley" width="100%"&gt;
&lt;/figure&gt;
]

.pull-right[
&lt;figure&gt;
  &lt;img src="img/04-class/greenspace-conversation.png" alt="Covid green spaces" title="Covid green spaces" width="100%"&gt;
&lt;/figure&gt;
]

???

&lt;https://theconversation.com/how-cities-can-add-accessible-green-space-in-a-post-coronavirus-world-139194&gt;

&lt;https://sf.eater.com/2020/5/14/21258980/berkeley-coronavirus-covid-19-jesse-arreguin-street-closures&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
